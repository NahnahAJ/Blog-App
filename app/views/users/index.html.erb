<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 divansitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns = "http://www.w3.org/1999/xhtml">

   <head>
      <meta http-equiv = "Content-Type" content = "text/html; charset = iso-8859-1" />
      <meta http-equiv = "Content-Language" content = "en-us" />
      <title>Library Info System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
   </head>

   <body>
      <div>
         
         <div class="container text-center">
            <h1>Nahnah's Blog App</h1>
            <h3>App powered by Ruby on Rails</h3>
            <br>
            <% if user_signed_in? %>
           <h3>Hello, <%= current_user.name %></h3>
            <% end %>
         </div>

         <main>
         <div class="container text-center">
            <% if @users.empty? %>
            <p>There are no users in the system.</p>
            <% else %>
            <% @users.each do |user| %> 
              
              <div class="row justify-content-md-center mb-3">
              <div class="col col-lg-2">
              <%= image_tag "#{user.photo}", size: "100x100" %>
              </div>
                <div class="col col-lg-4 border d-flex align-items-center gap-5">
                    
                    <h1><%= link_to user.name, user_path(user) %></h1>
                    <p>Number of posts: <%= user.posts_counter %></p>
                </div>
            </div>

                <% end %>
            <% end %>
         </div>
         </main>

         <% if user_signed_in? %>
          <div class="container text-center">
              <%= button_to "Sign Out", destroy_user_session_path, method: :delete %>
              <p><%= link_to "Edit Profile", edit_user_registration_path %></p>
              <p><%= link_to "Delete Account", user_registration_path, method: :delete, data: { confirm: "Are you sure?" } %></p>
              <p><%= link_to "All Users", users_path %></p>
              <p><%= link_to "My Posts", user_posts_path(current_user) %></p>
              </div>  
          <% else %>
          <div class="container text-center">
              <p><%= link_to "Sign Up", new_user_registration_path %></p>
              <p><%= link_to "Sign In", new_user_session_path %></p>
          </div>
          <% end %>

      </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
   </body>
   
</html>